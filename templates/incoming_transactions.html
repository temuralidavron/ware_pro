{% extends 'base.html' %}
{% load humanize %}

{% block title %}ğŸ“¥ Barcha Kirimlar{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2 class="text-center">ğŸ“¥ Barcha Kirimlar</h2>

    <a href="#" class="btn btn-success mb-3">
        ğŸ“Š Excel yuklab olish
    </a>

    <table class="table table-bordered text-center shadow">
        <thead class="table-primary text-white">
            <tr>
                <th>#</th>
                <th>ğŸ“Œ Mahsulot</th>
                <th>ğŸ“Š Miqdor</th>
                <th>ğŸ’° Jami Narx</th>
                <th>ğŸ™â€â™‚ï¸ Kimdan</th>
                <th>â³ Sana</th>
            </tr>
        </thead>
        <tbody>
            {% for transaction in incoming_transactions %}
            <tr class="{% cycle 'table-light' 'table-secondary' %}">
                <td>{{ forloop.counter }}</td>
                <td>{{ transaction.product.name }}</td>
                <td>{{ transaction.quantity }} {{ transaction.product.unit }}</td>
                <td><b>{{ transaction.total_price|floatformat:0|intcomma   }}</b></td>  {# ğŸ”¥ Faqat `total_price` ni chaqirdik #}
                <td>{{ transaction.person }}</td>
                <td>{{ transaction.created_at|date:"d F Y H:i" }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="6" class="text-center">âŒ Kirim mavjud emas.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div class="alert alert-primary text-end">
        <strong>ğŸ“Š Umumiy Kirim: </strong> <b>{{ total_incoming|floatformat:0|intcomma }}</b> so'm
    </div>
</div>
{% endblock %}
